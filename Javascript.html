<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
 $(function() 
   {
       initialize();
   }
  );
  

  function initialize(){
    showCodeWaiting();
    google.script.run.withSuccessHandler(loadStuff)
    .withFailureHandler(showError)
    .initialize(data.bookid,   data.transactionIds, data.templateUrl);
  }


/*
* updateStocks the client side return function for the server side 
* getStocks function. Updates the stocks values with the values retrieved from the server.  
*
* @param {object} stocks   The latest stock values in the format
*                         product@|@|@quantity
*
*
*/
function loadStuff(obj){
  hideCodeWaiting() ;
  console.log(JSON.stringify(obj))
  var bookName = obj.bookName;
  var bookId = obj.bookId;
  
  var transactionIds = obj.transactionIds;
  var templateUrl = obj.templateUrl
 $('#content').empty();
 
 var html = "<div > You are working on the book: "+ bookName + "</div>"
     html = html +"<div > the bookid : "+ bookId + "</div>"
     
     html = html +"<div > This is the id of the selected transaction: "+ transactionIds + "</div>"
     html = html +"<div > This : "+ templateUrl + "</div>"
 $('#content').html(html);
 
}

 /**
   * Displays an auto-dismissing error message in the add-on's UI.
   *
   * @param msg The error message to display.
   * @param element The element after which to display the error.
   */
  function showError(msg, element) {
     var div = $('<div id="error">' +msg + '</div>');

    setTimeout(function() {
      $('#error').remove();
    }, 7000); // auto-dismiss message after 5s.
    $(element).after(div);
    element.disabled = false;
  }

  function showCodeWaiting() {
    //code = code.replace(/\s+/g, '-').toLowerCase();
    //console.log("o code "+code)
    //showError(null)
    //waitingCodes.push(code);
    //disableButtons(true)
    document.getElementById('waiting').innerHTML = `<img src='https://storage.googleapis.com/bkper-public/addons/loading_3dots.gif'/>`
  }

  function hideCodeWaiting() {
    //code = code.replace(/\s+/g, '-').toLowerCase();
    //waitingCodes.splice(waitingCodes.indexOf(code), 1) 
    document.getElementById('waiting').innerHTML = ``
    //if (waitingCodes.length == 0) {
    //  disableButtons(false)
    //}
  }


</script>